<!DOCTYPE html>

<head>
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
    <script src="//cdn.amcharts.com/lib/5/themes/Animated.js"></script>
</head>

<body>
    <h1>Servers</h1>
    <ul>
        {% for server in servers %}
        <li>{{ server }} ({{ server.phase }} - {{ server.mach_type }})</li>
        {% endfor %}
    </ul>
    <div id="chartdiv" style="width: 100%; height: 250px;">

    </div>
    <script>
        var root = am5.Root.new("chartdiv");

        root.setThemes([
            am5themes_Animated.new(root)
        ]);

        var chart = root.container.children.push(
            am5xy.XYChart.new(root, {
                panY: false,
                wheelY: "zoomX",
                layout: root.verticalLayout
            })
        );

        // Define data
        var data = [{
            category: "Research",
            value1: 1000,
            value2: 588
        }, {
            category: "Marketing",
            value1: 1200,
            value2: 1800
        }, {
            category: "Sales",
            value1: 850,
            value2: 1230
        }];

        // Craete Y-axis
        let yAxis = chart.yAxes.push(
            am5xy.ValueAxis.new(root, {
                renderer: am5xy.AxisRendererY.new(root, {
                })
            })
        );

        // Create X-Axis
        var xAxis = chart.xAxes.push(
            am5xy.CategoryAxis.new(root, {
                maxDeviation: 0.2,
                renderer: am5xy.AxisRendererX.new(root, {
                }),
                categoryField: "category"
            })
        );
        xAxis.data.setAll(data);

        // Create series
        var series1 = chart.series.push(
            am5xy.ColumnSeries.new(root, {
                name: "Series",
                xAxis: xAxis,
                yAxis: yAxis,
                valueYField: "value1",
                categoryXField: "category",
                tooltip: am5.Tooltip.new(root, {})
            })
        );
        series1.data.setAll(data);

        var series2 = chart.series.push(
            am5xy.ColumnSeries.new(root, {
                name: "Series",
                xAxis: xAxis,
                yAxis: yAxis,
                valueYField: "value2",
                categoryXField: "category"
            })
        );
        series2.data.setAll(data);

        // Add legend
        var legend = chart.children.push(am5.Legend.new(root, {}));
        legend.data.setAll(chart.series.values);
    </script>
</body>
